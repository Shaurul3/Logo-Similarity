# Logo-Similarity
Am ales să fac acest challenge pentru aplicarea mea la Veridion fiind cel mai interesant dintre cele 3 provocări propuse.

# 1. Fișierul Parquet și obținerea domeniilor
  Am primit un fișier parquet și inițial nu am știut ce conține acesta. Erau mai multe grupuri de numere. Nu am știut cum funcționează parquet și m-am documentat despre acest fișier. Am înțeles cum stă treaba cu el și după am convertit fișierul parquet în fișier CSV.

# 2. Extragerea logo-urilor
  În prima fază am început să deschid mai multe site-uri pe rând și să văd cum sunt afișate logo-urile în pagină. Am observat din prima un pattern, existența cuvântului "logo" ori în numele pozei, ori în tagul HTML care afisează poza (<id>, <src>, <alt> etc.). 
  Prima instanță a codului a avut doar câteva taguri de verificat și am mai tot adaugat edge case-uri pe parcurs, dar am văzut că nu e de ajuns să extrag toate logo-urile. Am făcut un pas în spate și am observat că pe unele site-uri nu acces la pathfile-ul logo-ului și m-am gândit și la alte soluții. Am folosit favicon ca să extrag logo-urile. Aici a fost mai puțin de lucru, deoarece doar apelezi google favicon + domeniu ca să obții logo-ul, dar nici aici nu a fost în de ajuns să le adun pe toate. Favicon google are o bază de date cu mai multe logo-uri și are stocat din alea mai populare, neavând și salvate pentru site-uri mai mici sau obscure. Aici m-am gândit să fac o combinație și să combin efectiv cele două fișiere CSV. Am luat fișierul favicon cu link-urile către poze și am făcut un "LEFT JOIN" cu fișierul în care extrăsesem din HTML logo-ul, adica am complet spațiile goale din fișierul favicon cu link-uri din fișierul cu extragerea HTML (acolo unde s-a putut). Când le-am combinat am văzut că ajunsesem undeva la ~90% din totalul de logo-uri extrase din toate domeniile avute. 
  Ca să ajung la 97% cât aveam în cerințe am încercat ori să mai verific la site-urile rămase cum sunt stocate logo-urile ori să verific log-urile. Am observat că aveam probleme cu pozele salvate în format .svg (am rezolvat) sau am observat că pot să măresc lista de tag-uri în care se află logo-urile. Așa am reușit să obțin un scor de 97.15% de extragere a logo-urilor și am trecut la partea de verificarea a similitudinii.
  PS: Cu mai mult timp la dispoziție sigur puteam să extrag si mai multe din cele rămase. Începusem să încerc să iau pozele și din Wayback Machine, deoarece unele site-uri nu mai pot să fie accesate în prezent, dar întâmpinasem acolo și niște dificultăți.

# 3. Descărcarea pozelor
  Și aici am întâmpinat mici dificultăți. Existau mai multe probleme bazate pe tipul de fisier (svg, png), cazuri în care fundalul era transparent, ci nu alb sau formatul fișierului (base64). Am reușit să rezolv aceste probleme, dar au existat 37 de poze pe care nu am putut să le descarc. Am facut un fișier de log-uri ca să văd care sunt probleme și în mare acestea au fost: status 404 (Not Found, dar puteai să acceszi logo-ul în pagină), status 403 (Acces interzis), HTML page received instead of image (link-ul returna o pagină HTML doar cu logo-ul), base64 data URL (ignored) (Logo-ul este stocat în HTML ca base64 și nu poate fi descărcat) 

# 4. Gruparea logo-urilor după similitudinea dintre ele (nefolosind ML)
  Ca să grupez logo-urile am folosit perceptual Hash. Am creat pentru pozele salvate un hash al lor și le-am salvat într-un dicționar, unde cheia e hash-ul și valoarea este o listă de logo-uri cu acel hash. Pentru a compara logo-urile între ele am folosit dinstanța Hamming și am făcut diferența între două imagini (am transformat hash-ul in hexa) folosind două bucle for. Distanța dintre cele două trebuie să fie mai mic sau egal decât 5 (adică "comparând" cele două valori hexa să aibă maxim 5 biți diferiți ca să fie luată în considerare similitudinea). Pentru pozele cu aceeași similitudinea le-am atribuit un id și le-am ordonat într-un fișier .csv după acel id. Am obținut un total de 1368 de id-uri => în cele 4228 de logo-uri analizate, au fost doar 1368 de logo-uri unice.
  
